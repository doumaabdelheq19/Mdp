{% extends 'base.html.twig' %}

{% block title %}
    {{ parent() }} - {{ 'traduire_un_soustraitant_standard'|trans }}
{% endblock %}

{% block content %}
<div class="page">
    <div class="table-container-traitements">
        <div class="header headretour">
            <a href="javascript:history.back()">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 1024 1024">
                    <path fill="currentColor" d="M609.408 149.376L277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0a30.59 30.59 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.59 30.59 0 0 0 0-42.688a29.12 29.12 0 0 0-41.728 0"/>
                </svg>
            </a>
            <h2>{{ 'traduire_un_soustraitant_standard'|trans }}</h2>
        </div>

        {{ form_start(form, {"attr": {"class": "needs-validation", "enctype": "multipart/form-data"}}) }}

        <!-- Translation Type -->
        <div class="sectt">
            <h3>{{ 'traduction'|trans }}</h3>
            <div class="form-group">
                <div class="form-group1" style="width:100%">
                    {{ form_label(form.type) }}
                    {{ form_widget(form.type, { 'attr': { 'class': 'form-control ' ~ ((form_errors(form.type) == '') ? '' : 'is-invalid')} }) }}
                    <div class="invalid-feedback">{{ form_errors(form.type) | striptags }}</div>
                </div>
            </div>
        </div>

        <!-- Add Documents Section -->
        <div class="sectt">
            <h3>{{ 'ajouter_des_documents'|trans }}</h3>
            <div id="block_documents" class="form-group-container"></div>
            <button id="add_document_button" type="button" class="btn btn-secondary" style="margin-top: 10px;">
                {{ 'ajouter_un_document'|trans }}
            </button>
        </div>

        <!-- Submit Button -->
        <div style="margin-top: 20px;">
            <button type="submit" class="submit-button">{{ 'enregistrer'|trans }}</button>
        </div>

        {{ form_end(form) }}
    </div>
</div>
{% endblock %}

{% block javascripts %}
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            document.getElementById("add_document_button").addEventListener("click", function () {
                const div = document.createElement("div");
                div.className = "form-group d-flex block_document";

                // Title input
                const nameInput = document.createElement("input");
                nameInput.className = "form-control";
                nameInput.setAttribute("type", "text");
                nameInput.setAttribute("placeholder", "{{ 'titre'|trans }}");
                nameInput.setAttribute("name", "appbundle_subcontractor_documents_names[]");

                // File input
                const fileInput = document.createElement("input");
                fileInput.className = "form-control ml-2";
                fileInput.setAttribute("type", "file");
                fileInput.setAttribute("name", "appbundle_subcontractor_documents[]");

                // Remove button
                const removeButton = document.createElement("button");
                removeButton.className = "btn btn-danger ml-2 remove_document_button";
                removeButton.setAttribute("type", "button");
                removeButton.addEventListener("click", function () {
                    div.remove();
                });

                const removeIcon = document.createElement("i");
                removeIcon.className = "mdi mdi-file-remove";
                removeButton.appendChild(removeIcon);

                div.appendChild(nameInput);
                div.appendChild(fileInput);
                div.appendChild(removeButton);

                document.getElementById("block_documents").appendChild(div);
            });
        });
    </script>
{% endblock %}
