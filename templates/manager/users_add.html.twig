{% extends 'base.html.twig' %}

{% block title %}
    {{ parent() }} - Nouveau Client
{% endblock %}

{% block content %}
<div class="page">
    <div class="table-container-traitements">
        <div class="header-con">
            <div class="header">
                <h2><img src="./imgs/iconamoon_arrow-up-2-light.svg" alt=""> Nouveau Client</h2>
            </div>
        </div>

        {{ form_start(form, {'attr': {'class': 'sous-traitantform'}}) }}

        <!-- Avatar Upload -->
        <div class="form-row justify-content-center avatar-upload-container">
            <label class="avatar-input-label">
                <div class="avatar-container">
                    <span class="avatar avatar-xxl">
                        <span class="avatar-title rounded-circle bg-dark">
                            <i class="mdi mdi-account-box-outline"></i>
                        </span>
                        <span class="avatar-upload-icon">
                            <i class="mdi mdi-upload mdi-24px"></i>
                        </span>
                    </span>
                    {{ form_widget(form.pictureFile, {'attr': {'class': 'avatar-file-picker'} }) }}
                </div>
            </label>
            <div class="form-feedback">
                {{ form_errors(form.pictureFile) | striptags }}
            </div>
        </div>

        <!-- Société Section -->
        <div class="sectt no_boder">
            <h3>Société</h3>
            <div class="form-group">
                <div class="form-group1">
                    {{ form_label(form.companyName) }}
                    {{ form_widget(form.companyName, {'attr': {'placeholder': 'Nom de l\'entreprise'}}) }}
                </div>
                <div class="form-group1">
                    {{ form_label(form.siret) }}
                    {{ form_widget(form.siret, {'attr': {'placeholder': 'SIRET'}}) }}
                </div>
            </div>

            <div class="form-group">
                <div class="form-group1">
                    {{ form_label(form.address) }}
                    {{ form_widget(form.address, {'attr': {'placeholder': 'Adresse'}}) }}
                </div>
                <div class="form-group1">
                    {{ form_label(form.address2) }}
                    {{ form_widget(form.address2, {'attr': {'placeholder': 'Complément'}}) }}
                </div>
            </div>

            <div class="form-group">
                <div class="form-group1">
                    {{ form_label(form.zipCode) }}
                    {{ form_widget(form.zipCode, {'attr': {'placeholder': 'Code postal'}}) }}
                </div>
                <div class="form-group1">
                    {{ form_label(form.city) }}
                    {{ form_widget(form.city, {'attr': {'placeholder': 'Ville'}}) }}
                </div>
            </div>

            <div class="form-group">
                <div class="form-group1">
                    {{ form_label(form.companyPhone) }}
                    {{ form_widget(form.companyPhone, {'attr': {'placeholder': 'Téléphone'}}) }}
                </div>
                <div class="form-group1">
                    {{ form_label(form.employeesNumber) }}
                    {{ form_widget(form.employeesNumber, {'attr': {'placeholder': 'Nombre d\'employés'}}) }}
                </div>
            </div>
        </div>

        <!-- Utilisateur Section -->
        <div class="sectt">
            <h3>Utilisateur</h3>
            <div class="form-group">
                <div class="form-group1">
                    {{ form_label(form.phone) }}
                    {{ form_widget(form.phone, {'attr': {'placeholder': 'Téléphone'}}) }}
                </div>
                <div class="form-group1">
                    {{ form_label(form.email) }}
                    {{ form_widget(form.email, {'attr': {'placeholder': 'Email'}}) }}
                </div>
            </div>
        </div>

        <!-- Relai Principal -->
        <div class="sectt">
            <h3>Relai Principal</h3>
            <div class="form-group">
                <div class="form-group1">
                    {{ form_label(form.contactLastName) }}
                    {{ form_widget(form.contactLastName, {'attr': {'placeholder': 'Nom'}}) }}
                </div>
                <div class="form-group1">
                    {{ form_label(form.contactFirstName) }}
                    {{ form_widget(form.contactFirstName, {'attr': {'placeholder': 'Prénom'}}) }}
                </div>
            </div>

            <div class="form-group">
                <div class="form-group1">
                    {{ form_label(form.contactEmail) }}
                    {{ form_widget(form.contactEmail, {'attr': {'placeholder': 'Email'}}) }}
                </div>
                <div class="form-group1">
                    {{ form_label(form.contactPhone) }}
                    {{ form_widget(form.contactPhone, {'attr': {'placeholder': 'Téléphone'}}) }}
                </div>
            </div>

            <div class="form-group">
                <div class="form-group1 Fonction">
                    {{ form_label(form.contactJob) }}
                    {{ form_widget(form.contactJob, {'attr': {'placeholder': 'Fonction'}}) }}
                </div>
            </div>
        </div>

        <!-- Responsable de Traitement -->
        <div class="sectt">
            <h3>Responsable de Traitement</h3>
            <div class="form-group">
                <div class="form-group1">
                    {{ form_label(form.accountantLastName) }}
                    {{ form_widget(form.accountantLastName, {'attr': {'placeholder': 'Nom'}}) }}
                </div>
                <div class="form-group1">
                    {{ form_label(form.accountantFirstName) }}
                    {{ form_widget(form.accountantFirstName, {'attr': {'placeholder': 'Prénom'}}) }}
                </div>
            </div>

            <div class="form-group">
                <div class="form-group1">
                    {{ form_label(form.accountantEmail) }}
                    {{ form_widget(form.accountantEmail, {'attr': {'placeholder': 'Email'}}) }}
                </div>
                <div class="form-group1">
                    {{ form_label(form.accountantPhone) }}
                    {{ form_widget(form.accountantPhone, {'attr': {'placeholder': 'Téléphone'}}) }}
                </div>
            </div>

            <div class="form-group">
                <div class="form-group1 Fonction">
                    {{ form_label(form.accountantJob) }}
                    {{ form_widget(form.accountantJob, {'attr': {'placeholder': 'Fonction'}}) }}
                </div>
            </div>
        </div>

        <!-- Submit Button -->
        <button type="submit" id="appbundle_user_save" class="submit-button">Enregistrer</button>

        {{ form_end(form) }}
    </div>
</div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            function readFile(input) {
                if (input.files && input.files[0]) {
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        var avatarImg = document.querySelector('.avatar-container img');
                        if (avatarImg) {
                            avatarImg.src = e.target.result;
                        } else {
                            let avatarContainer = document.querySelector('.avatar-container');
                            avatarContainer.innerHTML = '<img src="'+e.target.result+'" class="avatar-img rounded-circle">';
                        }
                    };

                    reader.readAsDataURL(input.files[0]);
                }
            }

            document.querySelector('.avatar-file-picker').addEventListener('change', function () {
                readFile(this);
            });
        });
    </script>
{% endblock %}
